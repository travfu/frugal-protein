{% extends "products/html_base.html" %}
{% load static %}
{% load products_filters %}

{% block header %}
    <link rel="stylesheet" href="{% static "products/css/product_search.css" %}">
{% endblock header %}
    
{% block content %}
    <form action="">
        {% csrf_token %}
        {{ form.search }}
        {{ form.brand }}
        {{ form.store }}
    </form>
    
    {% if products %}
        <ul class="results-wrapper">
            {% for product in products %}            
                <li>
                    <a href=/product/{{ product.pid }} class="result">
                        <img src="https://dummyimage.com/200x200/c2c2c2/757575&text=No+image" alt="{{ product.description|title }}">
                        <span>{{ product.description|title }}</span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <div>No products found!</div>
    {% endif %}   

    {% if is_paginated %}
        <div class="pagination-wrapper">
            <div class="page-btn btn-prev">
                {% if page_obj.has_previous %}
                    <a href="{{ querystring|format_querystring }}&page={{ page_obj.previous_page_number }}"><</a>
                {% else %}
                    <a class="disabled"><</a>
                {% endif %}
            </div>

            <div class="page-text">Page {{ page_obj.number }} of {{ paginator.num_pages }}</div>

            <div class="page-btn btn-next">
                {% if page_obj.has_next %}
                    <a href="{{ querystring|format_querystring }}&page={{ page_obj.next_page_number }}">></a>
                {% else %}
                    <a class="disabled">></a>
                {% endif %}
            </div>
        </div>
    {% endif %}
{% endblock content %}